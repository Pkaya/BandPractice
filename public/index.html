<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no"/>
    <meta charset="utf-8">
    <title>Websocket</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="js/ws-client.js"></script>
</head>


<body>
<div class="container">
    <h2>Welcome to Bandpractice</h2>
    <br>
    <form id="frm_login" class="form-inline" action="http://localhost:4000/checkusername" method="post">
        <div class="form-group mx-sm-3 mb-2">
            Set username:
        </div>
        <div class="form-group mx-sm-3 mb-2">
            <label for="txt_user_name" class="sr-only">Username</label>
            <input type="text" class="form-control" id="txt_user_name" name="username" placeholder="Username">
        </div>
        <input id="btn_submit" type="submit" class="btn btn-primary mb-2 disabled" value="Go">
    </form>
</div>
<script>
    var user_name = $("#txt_user_name");
    var btn_submit = $("#btn_submit");


    $("#frm_login").on("submit", function (e) {
        e.preventDefault();

        $.get("http://localhost:4000/checkusername", {username: user_name.val()}, function(data) {
            console.log(data);
            if(data === "success"){

                self.location = "lobbies.html";
            }
            else{
                //write errors
            }
        })
    })

</script>
<!--<-->


<!--<h1>Websocket</h1>-->
<!--<div class="messages"></div>-->
<!--<form action="javascript:void(0)">-->
<!--<label for="message">&gt;</label>-->
<!--<input type="text" id="message" required autofocus />-->
<!--</form>-->

</body>
</html>